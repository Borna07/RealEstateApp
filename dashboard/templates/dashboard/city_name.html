{% extends "dashboard/base.html" %}
{% load humanize %}
{% load static %}
{% load dashboard_extras %}
{% block content %}
<div class="main">
    <div class="topbar">
    {% for dataset in datasets %}
    <tr>
        <td>
            <!-- <form action="" method="post">
            <input type="hidden" name="{{ dataset.calendar_week }}" value="{{ dataset.id }}">
            <input type="submit" value="{{ request.path|split:"/"}} {{ dataset.calendar_week }}">
            {% csrf_token %}
            </form> -->

            <a href="{% url 'deepDive' request.path|split:'/' dataset.calendar_week %}">
                <span class="icon"><ion-icon name="game-controller-outline"></ion-icon></span>
                <span class="title">"{{ request.path|split:"/"}} {{ dataset.calendar_week }}"</span>
            </a>
        </td>
    </tr>
    {% endfor %}
    </div>
    <div class="charts">
        <div class="chartStatDistribution">
            <div class="chartHeader">
                <canvas id="line-chart" width="400" height="100"></canvas>  
                <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

                <script type="text/javascript">
                   
                    const ctx = document.getElementById('line-chart');
                    const myChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: [{%for label in x_values %}'{{label}}',{%endfor%}],
                            datasets: [{
                                label: 'price/sqrm',
                                data: [{%for value in y_values %}{{value}},{%endfor%}],
                                borderColor: "#3e95cd",
                                borderWidth: 1,
                                fill: false,
                                tension: 0.1
                            }]
                        },
                        options: {
                            title: {
                                display: true,
                                text : "TEST123"
                                }
                            }
                        
                    });
                </script>
            </div>
        </div>


        {% for plot_fig in plot %}
        <div class="chartStatDistribution">
            <div class="chartHeader">
                <h2>{{ plot_fig.1 }}</h2>
            </div>
            <div>
                {% autoescape off %}
                {{ plot_fig.0 }}
                {% endautoescape %}
            </div>
        </div>
        {% endfor %}
    </div>

</div>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

{% endblock %}